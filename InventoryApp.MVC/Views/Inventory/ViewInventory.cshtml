@model InventoryApp.Core.Models.Inventory
@{
    ViewData["Title"] = "Inventory Details";
}

<div class="container-fluid m-4">
    <h2 class="mb-4 text-primary fw-bold">@ViewData["Title"]</h2>

    @await Html.PartialAsync("_ToastMessages")
    @await Html.PartialAsync("_ErrorMessage")

    <table class="table table-striped table-bordered align-middle">
        <tbody>
            <tr>
                <th scope="row" class="table-primary" style="width: 25%;">Batch No</th>
                <td>@Model.BatchNo</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">SKU</th>
                <td>@Model.SKU</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Product</th>
                <td>@Model.product?.ProductName</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Cost per Unit</th>
                <td>₱@Model.CostPerUnit.ToString("N2")</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Price per Unit</th>
                <td>₱@Model.PricePerUnit.ToString("N2")</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Initial Quantity</th>
                <td>@Model.InitialQuantity @Model.product?.UnitOfMeasure</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Current Quantity</th>
                <td>@Model.CurrentQty @Model.product?.UnitOfMeasure</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Reorder Level</th>
                <td>@Model.product?.RestockThreshold @Model.product?.UnitOfMeasure</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Stock Status</th>
                <td>@Model.Status</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Total Purchase Cost</th>
                <td>
                    @{
                        decimal totalPurchaseCost = 0;
                        totalPurchaseCost = Model.CostPerUnit * (Model.InitialQuantity / (decimal)Model.product.Volume);
                    }
                    @totalPurchaseCost.ToString("N2")
                </td>
            </tr>

            <tr>
                <th scope="row" class="table-primary">Total Inventory Cost</th>
                <td>
                    @{
                        decimal totalInventoryCost = 0;
                        totalInventoryCost = Model.CostPerUnit * (Model.CurrentQty / (decimal)Model.product.Volume);
                    }
                    @totalInventoryCost.ToString("N2")
                </td>
            </tr>

            <tr>
                <th scope="row" class="table-primary">Total Inventory Value</th>
                <td>
                    @{
                        decimal totalInventoryValue = 0;
                        totalInventoryValue = Model.PricePerUnit * (Model.CurrentQty / (decimal)Model.product.Volume);
                    }
                    @totalInventoryValue.ToString("N2")
                </td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Total Sold</th>
                <td>@Model.TotalSold @Model.product?.UnitOfMeasure</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Supplier</th>
                <td>@Model.supplier?.Name</td>
            </tr>
            <tr>
                <th scope="row" class="table-primary">Expiry Date</th>
                <td>@Model.ExpiryDate?.ToString("yyyy-MM-dd")</td>
            </tr>
        </tbody>
    </table>

    <div class="d-flex justify-content-end mt-3 gap-2">
        <a asp-action="EditInventory" asp-route-id="@Model.Id" class="btn btn-primary">
            Edit
        </a>
        <a asp-action="Inventory" class="btn btn-secondary">
            Back to List
        </a>
    </div>
</div>
